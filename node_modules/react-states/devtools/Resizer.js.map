{"version":3,"file":"Resizer.js","sourceRoot":"","sources":["../src/devtools/Resizer.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  createStates,\n  StatesUnion,\n  createActions,\n  ActionsUnion,\n  transition,\n  useTransition,\n  match,\n  useEnter,\n} from '../';\nimport { colors } from './styles';\n\nconst states = createStates({\n  IDLE: () => ({}),\n  DETECTING_RESIZE: (initialX: number) => ({ initialX }),\n  RESIZING: (x: number) => ({ x }),\n});\n\ntype State = StatesUnion<typeof states>;\n\nconst actions = createActions({\n  onMouseMove: (x: number) => ({ x }),\n  onMouseUp: (x: number) => ({ x }),\n  onMouseUpResizer: () => ({}),\n  onMouseDown: (x: number) => ({ x }),\n});\n\ntype Action = ActionsUnion<typeof actions>;\n\nconst reducer = (state: State, action: Action) =>\n  transition(state, action, {\n    IDLE: {\n      onMouseDown: (_, { x }) => states.DETECTING_RESIZE(x),\n    },\n    DETECTING_RESIZE: {\n      onMouseMove: (state, { x }) => {\n        if (Math.abs(x - state.initialX) > 3) {\n          return states.RESIZING(x);\n        }\n\n        return state;\n      },\n      onMouseUp: () => states.IDLE(),\n      onMouseUpResizer: () => states.IDLE(),\n    },\n    RESIZING: {\n      onMouseMove: (_, { x }) => states.RESIZING(x),\n      onMouseUp: () => states.IDLE(),\n    },\n  });\n\nexport const Resizer = ({\n  onResize,\n  onClick,\n  isOpen,\n}: {\n  onResize: (width: number) => void;\n  onClick: () => void;\n  isOpen: boolean;\n}) => {\n  const [resizer, dispatch] = React.useReducer(reducer, {\n    state: 'IDLE',\n  });\n  const { onMouseDown, onMouseMove, onMouseUp, onMouseUpResizer } = actions(dispatch);\n\n  useEnter(resizer, ['DETECTING_RESIZE', 'RESIZING'], () => {\n    const onMouseMoveListener = (event: MouseEvent) => onMouseMove(event.clientX);\n\n    const onMouseUpListener = (event: MouseEvent) => onMouseUp(event.clientX);\n\n    window.addEventListener('mousemove', onMouseMoveListener);\n    window.addEventListener('mouseup', onMouseUpListener);\n\n    return () => {\n      window.removeEventListener('mousemove', onMouseMoveListener);\n      window.removeEventListener('mouseup', onMouseUpListener);\n    };\n  });\n\n  useTransition(\n    resizer,\n    ['DETECTING_RESIZE => onMouseMove => DETECTING_RESIZE', 'RESIZING => onMouseMove => RESIZING'],\n    (_, { x }) => {\n      onResize(window.innerWidth - x);\n    },\n  );\n\n  useTransition(resizer, 'DETECTING_RESIZE => onMouseUpResizer => IDLE', () => onClick());\n\n  const style: React.CSSProperties = {\n    position: 'absolute',\n    height: '100%',\n    width: '10px',\n    backgroundColor: colors.blue,\n    userSelect: 'none',\n    zIndex: 99999999,\n  };\n\n  return match(resizer, {\n    IDLE: () => <div style={style} onMouseDown={(event) => onMouseDown(event.clientX)} />,\n    DETECTING_RESIZE: () => <div style={style} onMouseUp={() => onMouseUpResizer()} />,\n    RESIZING: () => <div style={style} />,\n  });\n};\n"]}